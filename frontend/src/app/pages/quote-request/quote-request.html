<div class="quote-request-container">
  <app-header></app-header>

  <!-- Hero -->
  <section class="hero">
    <h2>Demande de Devis</h2>
    <p>D√©crivez votre projet et recevez une proposition personnalis√©e sous 48h</p>
  </section>

  <!-- Formulaire -->
  <section class="form-section">
    <div class="form-container">
      
      <!-- Message de succ√®s -->
      <div *ngIf="submitted" class="success-container">
        <div class="success-icon">‚úÖ</div>
        <h3>Demande envoy√©e avec succ√®s !</h3>
        <p>{{ successMessage }}</p>
        <p class="info">Notre √©quipe vous contactera dans les plus brefs d√©lais.</p>
        <a routerLink="/home" class="btn-primary">Retour √† l'accueil</a>
      </div>

      <!-- Formulaire -->
      <form *ngIf="!submitted" [formGroup]="quoteForm" (ngSubmit)="onSubmit()">
        
        <div *ngIf="errorMessage" class="alert alert-danger">
          {{ errorMessage }}
        </div>

        <!-- Informations entreprise -->
        <div class="form-section-title">
          <span class="icon">üè¢</span>
          <h3>Informations entreprise</h3>
        </div>

        <div class="form-group">
          <label for="company_name">Nom de l'entreprise *</label>
          <input type="text" id="company_name" formControlName="company_name" class="form-control"
            [class.is-invalid]="f['company_name'].invalid && f['company_name'].touched" placeholder="Votre entreprise">
          <small *ngIf="f['company_name'].errors?.['required'] && f['company_name'].touched" class="text-danger">
            Le nom de l'entreprise est requis
          </small>
        </div>

        <!-- Coordonn√©es -->
        <div class="form-section-title">
          <span class="icon">üë§</span>
          <h3>Vos coordonn√©es</h3>
        </div>

        <div class="form-row">
          <div class="form-group half">
            <label for="last_name">Nom *</label>
            <input type="text" id="last_name" formControlName="last_name" class="form-control"
              [class.is-invalid]="f['last_name'].invalid && f['last_name'].touched" placeholder="Dupont">
          </div>
          <div class="form-group half">
            <label for="first_name">Pr√©nom *</label>
            <input type="text" id="first_name" formControlName="first_name" class="form-control"
              [class.is-invalid]="f['first_name'].invalid && f['first_name'].touched" placeholder="Jean">
          </div>
        </div>

        <div class="form-row">
          <div class="form-group half">
            <label for="email">Email *</label>
            <input type="email" id="email" formControlName="email" class="form-control"
              [class.is-invalid]="f['email'].invalid && f['email'].touched" placeholder="jean.dupont@entreprise.com">
          </div>
          <div class="form-group half">
            <label for="phone">T√©l√©phone *</label>
            <input type="tel" id="phone" formControlName="phone" class="form-control"
              [class.is-invalid]="f['phone'].invalid && f['phone'].touched" placeholder="01 23 45 67 89">
          </div>
        </div>

        <!-- √âv√©nement -->
        <div class="form-section-title">
          <span class="icon">üéâ</span>
          <h3>Votre √©v√©nement</h3>
        </div>

        <div class="form-row">
          <div class="form-group half">
            <label for="event_type">Type d'√©v√©nement *</label>
            <select id="event_type" formControlName="event_type" class="form-control">
              <option value="">-- S√©lectionnez --</option>
              <option *ngFor="let type of eventTypes" [value]="type.value">{{ type.label }}</option>
            </select>
          </div>
          <div class="form-group half">
            <label for="estimated_participants">Nombre de participants *</label>
            <input type="number" id="estimated_participants" formControlName="estimated_participants" 
              class="form-control" placeholder="50" min="1" max="10000">
          </div>
        </div>

        <div class="form-row">
          <div class="form-group half">
            <label for="planned_date">Date souhait√©e *</label>
            <input type="date" id="planned_date" formControlName="planned_date" class="form-control">
          </div>
          <div class="form-group half">
            <label for="location">Lieu souhait√©</label>
            <input type="text" id="location" formControlName="location" class="form-control" placeholder="Paris, Lyon...">
          </div>
        </div>

        <div class="form-group">
          <label for="needs_description">D√©crivez votre projet *</label>
          <textarea id="needs_description" formControlName="needs_description" class="form-control" rows="5"
            placeholder="D√©crivez votre √©v√©nement : objectifs, ambiance souhait√©e, budget estim√©..."></textarea>
          <small class="char-count">{{ quoteForm.get('needs_description')?.value?.length || 0 }} / 2000</small>
        </div>

        <button type="submit" [disabled]="loading" class="btn-submit">
          {{ loading ? '‚è≥ Envoi en cours...' : 'üì© Envoyer ma demande' }}
        </button>
      </form>
    </div>
  </section>

  <app-footer></app-footer>
</div>