<div class="quote-request-container">
  <!-- Header -->
  <header class="header">
    <div class="logo">
      <a routerLink="/home"><h1>Innov'Events</h1></a>
    </div>
    <nav class="nav">
      <a routerLink="/home" class="nav-link">Accueil</a>
      <a routerLink="/events" class="nav-link">√âv√©nements</a>
      <a routerLink="/reviews" class="nav-link">Avis</a>
      <a routerLink="/contact" class="nav-link">Contact</a>
      <a routerLink="/login" class="nav-link btn-login">Se connecter</a>
    </nav>
  </header>

  <!-- Hero -->
  <section class="hero">
    <h2>Demande de Devis</h2>
    <p>D√©crivez votre projet et recevez une proposition personnalis√©e sous 48h</p>
  </section>

  <!-- Formulaire -->
  <section class="form-section">
    <div class="form-container">
      
      <!-- Message de succ√®s -->
      <div *ngIf="submitted" class="success-container">
        <div class="success-icon">‚úÖ</div>
        <h3>Demande envoy√©e avec succ√®s !</h3>
        <p>{{ successMessage }}</p>
        <p class="info">Notre √©quipe vous contactera dans les plus brefs d√©lais pour discuter de votre projet.</p>
        <a routerLink="/home" class="btn-primary">Retour √† l'accueil</a>
      </div>

      <!-- Formulaire -->
      <form *ngIf="!submitted" [formGroup]="quoteForm" (ngSubmit)="onSubmit()">
        
        <div *ngIf="errorMessage" class="alert alert-danger">
          {{ errorMessage }}
        </div>

        <!-- Informations entreprise -->
        <div class="form-section-title">
          <span class="icon">üè¢</span>
          <h3>Informations entreprise</h3>
        </div>

        <div class="form-group">
          <label for="company_name">Nom de l'entreprise *</label>
          <input 
            type="text" 
            id="company_name" 
            formControlName="company_name" 
            class="form-control"
            [class.is-invalid]="f['company_name'].invalid && f['company_name'].touched"
            placeholder="Votre entreprise">
          <small *ngIf="f['company_name'].errors?.['required'] && f['company_name'].touched" class="text-danger">
            Le nom de l'entreprise est requis
          </small>
        </div>

        <!-- Informations contact -->
        <div class="form-section-title">
          <span class="icon">üë§</span>
          <h3>Vos coordonn√©es</h3>
        </div>

        <div class="form-row">
          <div class="form-group half">
            <label for="last_name">Nom *</label>
            <input 
              type="text" 
              id="last_name" 
              formControlName="last_name" 
              class="form-control"
              [class.is-invalid]="f['last_name'].invalid && f['last_name'].touched"
              placeholder="Dupont">
            <small *ngIf="f['last_name'].errors?.['required'] && f['last_name'].touched" class="text-danger">
              Le nom est requis
            </small>
          </div>
          <div class="form-group half">
            <label for="first_name">Pr√©nom *</label>
            <input 
              type="text" 
              id="first_name" 
              formControlName="first_name" 
              class="form-control"
              [class.is-invalid]="f['first_name'].invalid && f['first_name'].touched"
              placeholder="Jean">
            <small *ngIf="f['first_name'].errors?.['required'] && f['first_name'].touched" class="text-danger">
              Le pr√©nom est requis
            </small>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group half">
            <label for="email">Email *</label>
            <input 
              type="email" 
              id="email" 
              formControlName="email" 
              class="form-control"
              [class.is-invalid]="f['email'].invalid && f['email'].touched"
              placeholder="jean.dupont@entreprise.com">
            <small *ngIf="f['email'].errors?.['required'] && f['email'].touched" class="text-danger">
              L'email est requis
            </small>
            <small *ngIf="f['email'].errors?.['email'] && f['email'].touched" class="text-danger">
              Format d'email invalide
            </small>
          </div>
          <div class="form-group half">
            <label for="phone">T√©l√©phone *</label>
            <input 
              type="tel" 
              id="phone" 
              formControlName="phone" 
              class="form-control"
              [class.is-invalid]="f['phone'].invalid && f['phone'].touched"
              placeholder="01 23 45 67 89">
            <small *ngIf="f['phone'].errors?.['required'] && f['phone'].touched" class="text-danger">
              Le t√©l√©phone est requis
            </small>
            <small *ngIf="f['phone'].errors?.['pattern'] && f['phone'].touched" class="text-danger">
              Format de t√©l√©phone invalide
            </small>
          </div>
        </div>

        <!-- Informations √©v√©nement -->
        <div class="form-section-title">
          <span class="icon">üéâ</span>
          <h3>Votre √©v√©nement</h3>
        </div>

        <div class="form-row">
          <div class="form-group half">
            <label for="event_type">Type d'√©v√©nement *</label>
            <select 
              id="event_type" 
              formControlName="event_type" 
              class="form-control"
              [class.is-invalid]="f['event_type'].invalid && f['event_type'].touched">
              <option value="">-- S√©lectionnez --</option>
              <option *ngFor="let type of eventTypes" [value]="type.value">
                {{ type.label }}
              </option>
            </select>
            <small *ngIf="f['event_type'].errors?.['required'] && f['event_type'].touched" class="text-danger">
              Le type d'√©v√©nement est requis
            </small>
          </div>
          <div class="form-group half">
            <label for="estimated_participants">Nombre de participants *</label>
            <input 
              type="number" 
              id="estimated_participants" 
              formControlName="estimated_participants" 
              class="form-control"
              [class.is-invalid]="f['estimated_participants'].invalid && f['estimated_participants'].touched"
              placeholder="50"
              min="1"
              max="10000">
            <small *ngIf="f['estimated_participants'].errors?.['required'] && f['estimated_participants'].touched" class="text-danger">
              Le nombre de participants est requis
            </small>
            <small *ngIf="f['estimated_participants'].errors?.['min'] && f['estimated_participants'].touched" class="text-danger">
              Minimum 1 participant
            </small>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group half">
            <label for="planned_date">Date souhait√©e *</label>
            <input 
              type="date" 
              id="planned_date" 
              formControlName="planned_date" 
              class="form-control"
              [class.is-invalid]="f['planned_date'].invalid && f['planned_date'].touched">
            <small *ngIf="f['planned_date'].errors?.['required'] && f['planned_date'].touched" class="text-danger">
              La date est requise
            </small>
          </div>
          <div class="form-group half">
            <label for="location">Lieu souhait√©</label>
            <input 
              type="text" 
              id="location" 
              formControlName="location" 
              class="form-control"
              placeholder="Paris, Lyon, etc.">
          </div>
        </div>

        <div class="form-group">
          <label for="needs_description">D√©crivez votre projet *</label>
          <textarea 
            id="needs_description" 
            formControlName="needs_description" 
            class="form-control"
            [class.is-invalid]="f['needs_description'].invalid && f['needs_description'].touched"
            rows="5"
            placeholder="D√©crivez votre √©v√©nement : objectifs, ambiance souhait√©e, contraintes particuli√®res, budget estim√©..."></textarea>
          <small *ngIf="f['needs_description'].errors?.['required'] && f['needs_description'].touched" class="text-danger">
            La description est requise
          </small>
          <small *ngIf="f['needs_description'].errors?.['minlength'] && f['needs_description'].touched" class="text-danger">
            Minimum 20 caract√®res
          </small>
          <small class="char-count">
            {{ quoteForm.get('needs_description')?.value?.length || 0 }} / 2000 caract√®res
          </small>
        </div>

        <div class="form-info">
          <p>üìå Les champs marqu√©s d'un * sont obligatoires</p>
          <p>üîí Vos donn√©es sont prot√©g√©es et ne seront jamais partag√©es</p>
        </div>

        <button type="submit" [disabled]="loading" class="btn-submit">
          <span *ngIf="!loading">üì© Envoyer ma demande</span>
          <span *ngIf="loading">‚è≥ Envoi en cours...</span>
        </button>
      </form>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-section">
        <h4>Innov'Events</h4>
        <p>Votre partenaire √©v√©nementiel de confiance.</p>
      </div>
      <div class="footer-section">
        <h4>Contact</h4>
        <p>Email : contact&#64;innovevents.com</p>
        <p>T√©l : 01 23 45 67 89</p>
      </div>
      <div class="footer-section">
        <h4>Liens utiles</h4>
        <a routerLink="/mentions-legales">Mentions l√©gales</a>
        <a routerLink="/cgu">CGU</a>
        <a routerLink="/cgv">CGV</a>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; 2026 Innov'Events - Tous droits r√©serv√©s</p>
    </div>
  </footer>
</div>